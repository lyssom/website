var t=(()=>{function n(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t}})();function c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var h=(()=>{function d(t,e,i,n,a,r,s,h){var o=!(8<arguments.length&&void 0!==arguments[8])||arguments[8];c(this,d),this.canvas=document.createElement("canvas"),this.radius=i,this.context=this.canvas.getContext("2d"),this.x=t,this.y=e,this.angle=n,this.direction=a,this.speed=r,this.color=s,this.stroke=h,this.blur=o,this.draw()}return t(d,[{key:"draw",value:function(){this.canvas.width=2*this.radius,this.canvas.height=2*this.radius,this.blur&&(this.context.filter="blur(0.2em)");for(var t=.8*this.radius,e=this.canvas.width/2,i=this.canvas.height/2,n=(this.context.fillStyle=this.color,this.context.beginPath(),f/10),a=n/2/2,r=0;r<f;r+=n){var s=r-.75*a,h=r+.75*a,o=s-.5*a,d=h+.5*a;this.context.lineTo(e+Math.cos(o)*t,i+Math.sin(o)*t),this.context.lineTo(e+Math.cos(s)*this.radius,i+Math.sin(s)*this.radius),this.context.lineTo(e+Math.cos(h)*this.radius,i+Math.sin(h)*this.radius),this.context.lineTo(e+Math.cos(d)*t,i+Math.sin(d)*t)}this.context.closePath(),this.context.fill(),this.stroke&&(this.context.strokeStyle=this.stroke,this.context.stroke())}}]),d})(),n=(()=>{function r(t,e,i,n,a){c(this,r),this.context=t,Object.assign(this,{x:e,y:i,width:n,height:a}),this.gears=[]}return t(r,[{key:"drawGear",value:function(t){this.context.translate(t.x,t.y),this.context.rotate(t.angle),this.context.translate(-t.radius,-t.radius),this.context.drawImage(t.canvas,0,0),this.context.translate(t.radius,t.radius),this.context.rotate(-t.angle),this.context.translate(-t.x,-t.y)}},{key:"addGear",value:function(t,e,i,n,a,r,s){t=new h(t,e,i,n,a,r,s);return this.gears.push(t),t}},{key:"draw",value:function(t,e){var i=this;this.context.translate(this.x,this.y),this.gears.forEach(function(t){t.angle+=t.speed*e*t.direction,i.drawGear(t)}),this.context.translate(-this.x,-this.y)}},{key:"findOverlappingGear",value:function(i,n,a,r){var s=this;return this.gears.find(function(t){var e;return t.color===r&&(e=s.x+t.x-i)*e+(e=s.y+t.y-n)*e<(e=t.radius+a)*e})}},{key:"buildMeshFromGear",value:function(t){for(var e=1+Math.floor(2*Math.random()),i=t.radius,n=t.color,a=0;0<e;){a++;var r=Math.floor(10*Math.random())*f/10,s=t.x+Math.cos(r)*i*1.85,r=t.y+Math.sin(r)*i*1.85,h=t.angle+f/10/2;if(s<this.width&&r<this.height&&0<s&&0<r&&!o(this.x+s,this.y+r,.8*i,n)&&(a=0,e--,t=this.addGear(s,r,i,h,-1*t.direction,t.speed,n),n===u)&&Math.random()<.3&&(s=this.addGear(t.x,t.y,t.radius/2,t.angle,t.direction,t.speed,d),this.buildMeshFromGear(s)),20<a)return}}},{key:"buildMesh",value:function(t){var e=Math.random()*this.width,i=Math.random()*this.height,n=t===d?60:t===s?200:150;this.buildMeshFromGear({x:e,y:i,radius:n,angle:0,direction:1,speed:g,color:t})}},{key:"generate",value:function(){this.buildMesh(s),this.buildMesh(s),this.buildMesh(u),this.buildMesh(u),this.buildMesh(d),this.gears.sort(function(t,e){return i.indexOf(t.color)-i.indexOf(e.color)})}}]),r})();function o(e,i,n,a){return v.find(function(t){return t.findOverlappingGear(e,i,n,a)})}var a=document.getElementById("gears"),r=a.getContext("2d"),d="#ffffff",u="#ccece7",s="#25655a",i=[s,u,d],e=1500,l=700,f=2*Math.PI,g=.002,w=1,v=[],x=null,y=window.scrollY,m=200,M=document.getElementById("primaryGearContainer"),p=document.getElementById("primaryGears"),b=p.getContext("2d"),k=new n(b,0,0,0,0),G=new h(0,0,m/2,0,-1,g,u,s,!1);function E(t){requestAnimationFrame(E);var e=t-(x=null===x?t:x),i=(16<e&&(e=16),window.scrollY-y);y=window.scrollY,0!=i&&y<460&&(r.clearRect(0,0,a.width,a.height),r.save(),r.scale(w,w),v.forEach(function(t){t.draw(e,i)}),G.angle+=i*g,p.width=m,p.height=m,G.x=m/2,G.y=m/2,k.drawGear(G),r.restore()),x=t}var C=600;function O(){for(var t=masthead.getBoundingClientRect(),e=(a.width=t.width,a.height=t.height,function(i){for(var t=0;t<a.height/C;t++)(e=>{var t;v.find(function(t){return t.x===i*C&&t.y===e*C})||(t=new n(r,i*C,e*C,C,C),v.push(t),t.generate())})(t)}),i=0;i<a.width/C;i++)e(i);t=M.getBoundingClientRect();m=t.width,v.forEach(function(t){t.draw(0,0)}),p.width=m,p.height=m,G.x=m/2,G.y=m/2,G.radius=m/2,G.draw(),k.drawGear(G)}function B(){var t,e=window.location.hash;e&&(e=document.querySelector(e))&&(e=e.getBoundingClientRect(),t=document.querySelector("header").getBoundingClientRect(),e=window.pageYOffset+e.top-t.height,window.scrollTo(window.pageXOffset,e))}O(),window.addEventListener("resize",O),requestAnimationFrame(E),window.addEventListener("load",B),window.addEventListener("hashChange",B);
//# sourceMappingURL=work.js.map